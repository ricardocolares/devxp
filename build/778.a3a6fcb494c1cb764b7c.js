"use strict";(self.webpackChunkpayload_blog_typescript=self.webpackChunkpayload_blog_typescript||[]).push([[778],{81778:(e,t,l)=>{l.r(t),l.d(t,{default:()=>q});var a=l(67294),A=l(38439),n=l(28630),o=l(91455),r=l(40684),s=l(90546),i=l.n(s),c=l(77329),d=l(87578),g=l(45074),u=l(64012),m=l(19826),E=l(90666),p=l(48170),f=l(95050);const h=()=>a.createElement("svg",{width:"25",height:"26",viewBox:"0 0 25 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"search"},a.createElement("circle",{cx:"11.2069",cy:"10.9135",r:"5",stroke:"#333333",strokeWidth:"2",className:"stroke"}),a.createElement("line",{x1:"14.914",y1:"14.2063",x2:"20.5002",y2:"19.7925",stroke:"#333333",strokeWidth:"2",className:"stroke"}));l(27775);const v="block-search",I=e=>{const{setSearchTerm:t}=e;return a.createElement("div",{className:v},a.createElement("input",{className:"block-search__input",placeholder:"Search for a block",onChange:e=>{t(e.target.value)}}),a.createElement(h,null))};var w=l(44586);const B=()=>{const[e]=(0,a.useState)(`pattern${(0,w.Z)()}`),[t]=(0,a.useState)(`image${(0,w.Z)()}`);return a.createElement("svg",{width:"82",height:"53",viewBox:"0 0 82 53",fill:"none"},a.createElement("rect",{x:"0.713013",width:"80.574",height:"52.7791",fill:`url(#${e})`}),a.createElement("defs",null,a.createElement("pattern",{id:`${e}`,patternContentUnits:"objectBoundingBox",width:"1",height:"1"},a.createElement("use",{xlinkHref:`#${t}`,transform:"scale(0.00387597 0.00591716)"})),a.createElement("image",{id:t,width:"258",height:"169",xlinkHref:"data:image/png;base64,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"})))};l(66047);const b="block-selection",y=e=>{const{addRow:t,addRowIndex:l,block:A,close:n}=e,{labels:o,slug:r,imageURL:s,imageAltText:i}=A;return a.createElement("button",{className:b,tabIndex:0,type:"button",onClick:()=>{n(),t(l,r)}},a.createElement("div",{className:"block-selection__image"},s?a.createElement("img",{src:s,alt:i}):a.createElement(B,null)),a.createElement("div",{className:"block-selection__label"},o.singular))};l(85680);const C=e=>{const{blocks:t,...l}=e;return a.createElement("div",{className:"blocks-container"},null==t?void 0:t.map(((e,t)=>a.createElement(y,{key:t,block:e,...l}))))},k=e=>{const{blocks:t,close:l,parentIsHovered:A,watchParentHover:n,...o}=e,[r,s]=(0,a.useState)(""),[i,c]=(0,a.useState)(t),[d,g]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{const e=t.reduce(((e,t)=>(-1!==t.slug.toLowerCase().indexOf(r.toLowerCase())&&e.push(t),e)),[]);c(e)}),[r,t]),(0,a.useEffect)((()=>{!A&&!d&&l&&n&&l()}),[d,A,l,n]),a.createElement("div",{className:"block-selector",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1)},a.createElement(I,{setSearchTerm:s}),a.createElement(C,{blocks:i,close:l,...o}))};var Q=l(35193),x=l(54945),R=l(77070),S=l(9684),D=l(22158),O=l(49185),U=l(5590),T=l(83780);l(36742);const P="section-title",L=e=>{const{path:t,readOnly:l}=e,{value:A,setValue:n}=(0,p.Z)({path:t}),o=[P].filter(Boolean).join(" ");return a.createElement("div",{className:o,"data-value":A},a.createElement("input",{className:`${P}__input`,id:t,value:A||"",placeholder:"Untitled",type:"text",name:t,onChange:e=>{e.stopPropagation(),e.preventDefault(),n(e.target.value)},readOnly:l}))};var N=l(71486),V=l(95738),Z=l(74020);l(53739);const F="blocks-field",K={singular:"Block",plural:"Blocks"},q=i()((e=>{const{label:t,name:l,path:s,blocks:i,labels:h=K,fieldTypes:v,maxRows:I,minRows:w,required:B,validate:b=Q.blocks,permissions:y,admin:{readOnly:C,description:P,condition:q,className:H}}=e,M=s||l,{preferencesKey:J}=(0,g.x5)(),{getPreference:G}=(0,o.G)(),{setPreference:j}=(0,o.G)(),[W,Y]=(0,a.useReducer)(d.Z,void 0),_=(0,u.useForm)(),{user:z}=(0,n.a)(),{id:X}=(0,g.x5)(),$=(0,r.bU)(),ee=(0,S.T)(),{dispatchFields:te}=_,le=(0,a.useCallback)(((e,t)=>b(e,{...t,minRows:w,maxRows:I,required:B})),[I,w,B,b]),[ae,Ae]=(0,a.useState)(!1),[ne,oe]=(0,a.useState)(),{showError:re,errorMessage:se,value:ie,setValue:ce}=(0,p.Z)({path:M,validate:le,disableFormData:ae,condition:q}),de=(0,a.useCallback)((e=>{e||oe(void 0)}),[]),ge=(0,a.useCallback)((async(e,t)=>{const l=i.find((e=>e.slug===t)),a=await(0,m.Z)({fieldSchema:l.fields,operation:ee,id:X,user:z,locale:$});te({type:"ADD_ROW",rowIndex:e,subFieldState:a,path:M,blockType:t}),Y({type:"ADD",rowIndex:e,blockType:t}),ce(ie+1),setTimeout((()=>{(0,V.w)(`${M}-row-${e+1}`)}),0)}),[M,ce,ie,i,te,ee,X,z,$]),ue=(0,a.useCallback)((async(e,t)=>{te({type:"DUPLICATE_ROW",rowIndex:e,path:M}),Y({type:"ADD",rowIndex:e,blockType:t}),ce(ie+1),setTimeout((()=>{(0,V.w)(`${M}-row-${e+1}`)}),0)}),[Y,te,M,ce,ie]),me=(0,a.useCallback)((e=>{Y({type:"REMOVE",rowIndex:e}),te({type:"REMOVE_ROW",rowIndex:e,path:M}),ce(ie-1)}),[M,ce,ie,te]),Ee=(0,a.useCallback)(((e,t)=>{Y({type:"MOVE",moveFromIndex:e,moveToIndex:t}),te({type:"MOVE_ROW",moveFromIndex:e,moveToIndex:t,path:M})}),[Y,te,M]),pe=(0,a.useCallback)((e=>{if(!e.destination)return;const t=e.source.index,l=e.destination.index;Ee(t,l)}),[Ee]),fe=(0,a.useCallback)((async(e,t)=>{var l,a,A;if(Y({type:"SET_COLLAPSE",id:e,collapsed:t}),J){const n=await G(J)||{fields:{}};let o=(null===(a=null===(l=null==n?void 0:n.fields)||void 0===l?void 0:l[M])||void 0===a?void 0:a.collapsed.filter((e=>W.find((t=>t.id===e)))))||[];t?o.push(e):o=o.filter((t=>t!==e)),j(J,{...n,fields:{...(null==n?void 0:n.fields)||{},[M]:{...null===(A=null==n?void 0:n.fields)||void 0===A?void 0:A[M],collapsed:o}}})}}),[J,G,M,j,W]),he=(0,a.useCallback)((async e=>{var t;if(Y({type:"SET_ALL_COLLAPSED",collapse:e}),J){const l=await G(J)||{fields:{}};j(J,{...l,fields:{...(null==l?void 0:l.fields)||{},[M]:{...null===(t=null==l?void 0:l.fields)||void 0===t?void 0:t[M],collapsed:e?W.map((({id:e})=>e)):[]}}})}}),[G,M,J,W,j]);(0,a.useEffect)((()=>{(async()=>{var e,t;const l=_.getDataByPath(M),a=await G(J)||{fields:{}};Y({type:"SET_ALL",data:l||[],collapsedState:null===(t=null===(e=null==a?void 0:a.fields)||void 0===e?void 0:e[M])||void 0===t?void 0:t.collapsed})})()}),[_,M,G,J]),(0,a.useEffect)((()=>{ce((null==W?void 0:W.length)||0,!0),0===(null==W?void 0:W.length)?Ae(!1):Ae(!0)}),[W,ce]);const ve=I&&(null==W?void 0:W.length)>=I,Ie=["field-type",F,H].filter(Boolean).join(" ");return W?a.createElement(A.Z5,{onDragEnd:pe},a.createElement("div",{id:`field-${M.replace(/\./gi,"__")}`,className:Ie},a.createElement("div",{className:`${F}__error-wrap`},a.createElement(E.Z,{showError:re,message:se})),a.createElement("header",{className:`${F}__header`},a.createElement("div",{className:`${F}__header-wrap`},a.createElement("h3",null,t),a.createElement("ul",{className:`${F}__header-actions`},a.createElement("li",null,a.createElement("button",{type:"button",onClick:()=>he(!0),className:`${F}__header-action`},"Collapse All")),a.createElement("li",null,a.createElement("button",{type:"button",onClick:()=>he(!1),className:`${F}__header-action`},"Show All")))),a.createElement(R.Z,{value:ie,description:P})),a.createElement(A.bK,{droppableId:"blocks-drop",isDropDisabled:C},(e=>a.createElement("div",{ref:e.innerRef,...e.droppableProps},W.length>0&&W.map(((e,t)=>{const{blockType:l}=e,n=i.find((e=>e.slug===l)),o=t+1;return n?a.createElement(A._l,{key:e.id,draggableId:e.id,index:t,isDragDisabled:C},(A=>a.createElement("div",{id:`${M}-row-${t}`,ref:A.innerRef,...A.draggableProps},a.createElement(D.z,{collapsed:e.collapsed,onToggle:t=>fe(e.id,t),className:`${F}__row`,key:e.id,dragHandleProps:A.dragHandleProps,header:a.createElement("div",{className:`${F}__block-header`},a.createElement("span",{className:`${F}__block-number`},o>=10?o:`0${o}`),a.createElement(N.Z,{pillStyle:"white",className:`${F}__block-pill ${F}__block-pill-${l}`},n.labels.singular),a.createElement(L,{path:`${M}.${t}.blockName`,readOnly:C})),actions:C?void 0:a.createElement(a.Fragment,null,a.createElement(f.Z,{key:`${l}-${t}`,forceOpen:ne===t,onToggleOpen:de,buttonType:"none",size:"large",horizontalAlign:"right",render:({close:e})=>a.createElement(k,{blocks:i,addRow:ge,addRowIndex:t,close:e})}),a.createElement(O.A,{rowCount:W.length,duplicateRow:()=>ue(t,l),addRow:()=>oe(t),moveRow:Ee,removeRow:me,index:t}))},a.createElement(Z.Z,{name:`${M}.${t}.id`,value:e.id}),a.createElement(U.Z,{className:`${F}__fields`,forceRender:!0,readOnly:C,fieldTypes:v,permissions:null==y?void 0:y.fields,fieldSchema:n.fields.map((e=>({...e,path:`${M}.${t}${(0,T.fieldAffectsData)(e)?`.${e.name}`:""}`})))}))))):null})),(W.length<w||B&&0===W.length)&&a.createElement(x.Z,{type:"error"},"This field requires at least"," ",`${w||1} ${1===w||void 0===w?h.singular:h.plural}`),0===W.length&&C&&a.createElement(x.Z,null,"This field has no"," ",h.plural,"."),e.placeholder))),!C&&!ve&&a.createElement("div",{className:`${F}__add-button-wrap`},a.createElement(f.Z,{buttonType:"custom",size:"large",horizontalAlign:"left",button:a.createElement(c.Z,{buttonStyle:"icon-label",icon:"plus",iconPosition:"left",iconStyle:"with-border"},`Add ${h.singular}`),render:({close:e})=>a.createElement(k,{blocks:i,addRow:ge,addRowIndex:ie,close:e})})))):null}))},44586:(e,t,l)=>{var a;l.d(t,{Z:()=>d});var A=new Uint8Array(16);function n(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(A)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const r=function(e){return"string"==typeof e&&o.test(e)};for(var s=[],i=0;i<256;++i)s.push((i+256).toString(16).substr(1));const c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!r(l))throw TypeError("Stringified UUID is invalid");return l};const d=function(e,t,l){var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){l=l||0;for(var A=0;A<16;++A)t[l+A]=a[A];return t}return c(a)}}}]);